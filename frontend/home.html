<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSE Department</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
  <link href="./assets/css/output.css" rel="stylesheet">
  <style>
    /* 🚀 Hide page until session check finishes */
    body {
      display: none;
    }

    /* Modal styles */
    #staffModal {
      background-color: rgba(0, 0, 0, 0.6);
    }
  </style>
</head>

<body class="scroll-smooth bg-gray-50">
  <!-- HEADER -->
  <header class="fixed top-0 left-0 w-full bg-gray-800 text-white shadow-md z-50">
    <div class="flex items-center justify-between px-6 py-4 mr-10">
      <button id="menu-btn" class="md:hidden text-2xl">
        <i class="fa-solid fa-bars"></i>
      </button>
      <h1 class="text-2xl lg:text-3xl font-bold">CSE Department</h1>
      <nav class="hidden md:flex items-center space-x-10">
        <a href="#home" class="hover:underline">Home</a>
        <a href="#about" class="hover:underline">About</a>
        <a href="#contact" class="hover:underline">Contact</a>
        <button onclick="login()"
          class="bg-blue-700 text-white px-5 py-2 rounded-xl hover:bg-blue-500 flex items-center gap-2">
          Log in
        </button>
      </nav>
    </div>

    <!-- Mobile Menu -->
    <nav id="mobile-menu"
      class="fixed top-16 left-0 h-full w-64 bg-gray-500 backdrop-blur-md text-gray-900 shadow-xl transform -translate-x-full transition-transform duration-300 md:hidden z-50 flex flex-col px-6 py-10 space-y-6">
      <a href="#home" class="mobile-link text-lg font-medium hover:text-blue-600 transition">Home</a>
      <a href="#about" class="mobile-link text-lg font-medium hover:text-blue-600 transition">About</a>
      <a href="#contact" class="mobile-link text-lg font-medium hover:text-blue-600 transition">Contact</a>
      <button onclick="login()"
        class="mt-8 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-500 transition">
        Log in
      </button>
    </nav>
  </header>

  <!-- HOME -->
  <section id="home"
    class="min-h-screen flex flex-col items-center justify-center text-center px-6 pt-28 bg-gradient-to-r from-cyan-500 to-red-500">
    <h1 class="text-3xl md:text-5xl lg:text-6xl font-bold leading-tight text-white">
      Department Academic <br> Management System
    </h1>
    <p class="text-lg md:text-2xl lg:text-3xl mt-6 text-white">
      Your one-stop portal for academics, attendance and resources.
    </p>
    <div class="flex flex-wrap justify-center gap-6 mt-12">
      <div
        class="bg-gradient-to-tr from-pink-200 via-purple-400 to-indigo-600 w-50 h-50 rounded-3xl shadow-lg p-6 flex flex-col justify-between items-center transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
        <p class="text-white text-xl font-semibold">Student <br> Marks</p>
        <a href="studentMarks.html">
          <button class="bg-blue-700 text-white px-6 py-3 rounded-xl hover:bg-blue-500 flex items-center gap-2">
            <i class="fa-solid fa-chart-simple"></i> View
          </button>
        </a>
      </div>

      <div
        class="bg-gradient-to-tr from-pink-200 via-purple-400 to-indigo-600 w-50 h-50 rounded-3xl shadow-lg p-6 flex flex-col justify-between items-center transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
        <p class="text-white text-xl font-semibold">Student Attendance</p>
        <a href="studentAttendance.html">
          <button class="bg-blue-700 text-white px-6 py-3 rounded-xl hover:bg-blue-500 flex items-center gap-2">
            <i class="fa-solid fa-calendar-week"></i> View
          </button>
        </a>
      </div>
    </div>
  </section>


  <!-- ABOUT -->
  <section id="about"
    class="min-h-screen bg-gradient-to-r from-cyan-500 to-red-500 flex items-center justify-center px-10 py-20">
    <div class="bg-white/20 backdrop-blur-md rounded-2xl shadow-2xl  w-450 p-8 text-white">
      <!-- Profile -->
      <div class="flex flex-col items-center text-center">
        <img src="https://via.placeholder.com/150" alt="Profile Photo"
          class="w-32 h-32 rounded-full border-4 border-white shadow-lg mb-4">
        <h2 class="text-2xl font-bold">Department of Computer Science & Engineering</h2>
        <p class="text-sm mt-2 text-gray-100">Visvesvaraya Technological University, Belgaum, Karnataka</p>
      </div>

      <hr class="my-6 border-gray-300/40">
      <div class="flex flex-col md:flex-row items-start justify-center gap-8 text-white">

        <!-- Left Section -->
        <div class="text-lg leading-relaxed text-justify md:w-1/2 bg-white/10 p-6 rounded-2xl shadow-md">
          <p>
            The Bachelor of Engineering (BE) in Computer Science & Engineering (CS&E) programme is affiliated to
            <strong>Visvesvaraya Technological University (VTU), Belgaum, Karnataka.</strong>
            This programme is offered with a blend of theory, practical courses, and projects that help students cope
            with the recent advancements in the computer industry.
          </p>

          <div class="mt-4">
            <strong>Bridge Courses:</strong>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
              <li>Advanced Java Programming (Laboratory)</li>
              <li>Python Programming (Laboratory)</li>
              <li>Soft Skills Development Courses (I - VII Semesters)</li>
              <li>Technical Skill Development Courses (I – VII Semesters)</li>
            </ul>
          </div>

          <p class="mt-4"><strong>Annual Intake:</strong> 180</p>
        </div>

        <!-- Vertical Divider -->
        <div class="hidden md:block border-l-4 border-white/50 h-auto mx-4"></div>

        <!-- Right Section -->
        <div class="md:w-1/2 bg-white/10 p-6 rounded-2xl shadow-md">
          <!-- Vision -->
          <div class="mb-6">
            <h1 class="text-3xl font-extrabold text-center mb-4 text-yellow-300">Vision</h1>
            <p class="text-lg leading-relaxed text-justify">
              To be recognized as a center of knowledge dissemination in Computer Science and Engineering by imparting
              value-added education to transform budding minds into competent computer professionals.
            </p>
          </div>

          <!-- Mission -->
          <div>
            <h1 class="text-3xl font-extrabold text-center mb-4 text-yellow-300">Mission</h1>
            <ul class="space-y-3 text-lg leading-relaxed">
              <li class="flex items-start gap-2">
                <span class="text-yellow-400 mt-1">•</span>
                <span>Provide a value-based learning environment enriched with ethics, honesty, and integrity that
                  equips
                  students to cater to the needs of society and industry.</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-yellow-400 mt-1">•</span>
                <span>Augment the knowledge of students towards cutting-edge technologies and state-of-the-art tools of
                  Computer Science & Engineering.</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-yellow-400 mt-1">•</span>
                <span>Create opportunities for all-round development of students through co-curricular and
                  extra-curricular activities.</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-yellow-400 mt-1">•</span>
                <span>Promote research, innovation, and development activities in the field of Computer Science among
                  staff and students without any bias.</span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Staff Button -->
      <div class="flex justify-center">
        <button id="staffBtn"
          class="px-6 py-3 bg-white text-cyan-600 font-semibold rounded-full shadow-md hover:bg-cyan-50 hover:scale-105 transition transform duration-300">
          Meet Our Staffs
        </button>
      </div>
    </div>
  </section>

  <!-- STAFF MODAL -->
  <div id="staffModal" class="fixed inset-0 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl shadow-2xl w-11/12 max-w-3xl p-8 relative">
      <button id="closeModal" class="absolute top-4 right-4 text-gray-600 hover:text-red-500 text-2xl">&times;</button>
      <h2 class="text-3xl font-bold text-center mb-6 text-cyan-600">Our Staffs</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-center">
        <!-- Example Staff Card -->
        <div class="bg-gray-100 p-4 rounded-xl shadow hover:shadow-lg transition">
          <img src="https://via.placeholder.com/120" class="mx-auto rounded-full mb-3">
          <h3 class="font-bold text-lg">Dr. Ananya Rao</h3>
          <p class="text-gray-700 text-sm">Head of Department</p>
        </div>
        <div class="bg-gray-100 p-4 rounded-xl shadow hover:shadow-lg transition">
          <img src="https://via.placeholder.com/120" class="mx-auto rounded-full mb-3">
          <h3 class="font-bold text-lg">Mr. Raghav Sharma</h3>
          <p class="text-gray-700 text-sm">Assistant Professor</p>
        </div>
        <div class="bg-gray-100 p-4 rounded-xl shadow hover:shadow-lg transition">
          <img src="https://via.placeholder.com/120" class="mx-auto rounded-full mb-3">
          <h3 class="font-bold text-lg">Mrs. Priya Patil</h3>
          <p class="text-gray-700 text-sm">Associate Professor</p>
        </div>
        <div class="bg-gray-100 p-4 rounded-xl shadow hover:shadow-lg transition">
          <img src="https://via.placeholder.com/120" class="mx-auto rounded-full mb-3">
          <h3 class="font-bold text-lg">Mr. Kiran Desai</h3>
          <p class="text-gray-700 text-sm">Assistant Professor</p>
        </div>
      </div>
    </div>
  </div>

  <!-- CONTACT -->
  <section id="contact"
    class="md:h-160 h-screen bg-gradient-to-r from-cyan-500 to-red-500 flex flex-col items-center justify-center px-6">
    <h2 class="text-3xl md:text-5xl font-bold leading-loose">Contact Us</h2>
    <input id="email" type="email" placeholder="Enter your email"
      class="mt-4 p-3 w-full max-w-md border border-white text-black rounded" required>
    <textarea id="message" placeholder="Your message"
      class="mt-4 p-3 border border-white text-black rounded w-full max-w-md h-32" required></textarea>
    <button type="button" id="sendBtn" class="mt-4 bg-blue-500 text-white px-6 py-3 rounded hover:bg-blue-600">
      Send Message
    </button>
    <div id="loading" class="w-12 h-12 mt-4 hidden">
      <img src="./images/spinner.svg" alt="Loading..." class="w-full h-full">
    </div>
    <p id="statusMsg" class="mt-4 text-lg font-medium"></p>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="bg-gray-800 text-white text-center py-6">
      <p>&copy; 2025 CSE Department. All rights reserved.</p>
      <div class="flex justify-center space-x-4 mt-2">
        <!-- Instagram -->
        <a href="https://www.instagram.com/cecmangalore" target="_blank" class="hover:text-gray-400" title="Instagram">
          <i class="fab fa-instagram text-xl"></i>
        </a>

        <!-- Email -->
        <a href="mailto:dams.project25@gmail.com" class="hover:text-gray-400" title="Email">
          <i class="fas fa-envelope text-xl"></i>
        </a>

        <!-- LinkedIn -->
        <a href="https://www.linkedin.com/school/canara-engineering-college-official/" target="_blank"
          class="hover:text-gray-400" title="LinkedIn">
          <i class="fab fa-linkedin text-xl"></i>
        </a>


      </div>
    </div>
  </footer>


  <!-- SCRIPT -->
  <script>
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const staffBtn = document.getElementById('staffBtn');
    const staffModal = document.getElementById('staffModal');
    const closeModal = document.getElementById('closeModal');

    // Toggle menu
    menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('-translate-x-full'));
    document.addEventListener("click", (e) => {
      if (!mobileMenu.contains(e.target) && !menuBtn.contains(e.target)) mobileMenu.classList.add("-translate-x-full");
    });
    document.querySelectorAll('.mobile-link').forEach(link => {
      link.addEventListener('click', () => mobileMenu.classList.add('-translate-x-full'));
    });

    // Login redirect
    function login() {
      window.location.href = "login.html";
    }

    // Staff modal toggle
    staffBtn.addEventListener('click', () => staffModal.classList.remove('hidden'));
    closeModal.addEventListener('click', () => staffModal.classList.add('hidden'));
    window.addEventListener('click', (e) => {
      if (e.target === staffModal) staffModal.classList.add('hidden');
    });

    // Contact form logic
    const sendBtn = document.getElementById('sendBtn');
    const loader = document.getElementById('loading');
    const statusMsg = document.getElementById('statusMsg');

    sendBtn.addEventListener('click', async () => {
      const email = document.getElementById('email').value.trim();
      const message = document.getElementById('message').value.trim();

      if (!email || !message) {
        statusMsg.textContent = "Please enter your email and message.";
        statusMsg.className = "mt-4 text-red-600 font-semibold";
        return;
      }

      loader.classList.remove('hidden');
      sendBtn.disabled = true;
      statusMsg.textContent = "";

      try {
        const apiURL = window.location.origin + "/contact";
        const res = await fetch(apiURL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, message }),
        });
        const data = await res.json();
        if (data.success) {
          statusMsg.textContent = "✅ Message sent successfully!";
          statusMsg.className = "mt-4 text-green-600 font-semibold";
          document.getElementById('email').value = '';
          document.getElementById('message').value = '';
        } else {
          statusMsg.textContent = `❌ ${data.error || "Failed to send message"}`;
          statusMsg.className = "mt-4 text-red-600 font-semibold";
        }
      } catch (err) {
        statusMsg.textContent = "❌ Error sending message. Try again later.";
        statusMsg.className = "mt-4 text-red-600 font-semibold";
      } finally {
        loader.classList.add('hidden');
        sendBtn.disabled = false;
      }
    });

    // Session check
    async function checkSession() {
      try {
        const res = await fetch("/api/session", { credentials: "include" });
        const data = await res.json();
        if (data.loggedIn) {
          if (data.user.role === "student") window.location.replace("/student-home");
          else if (data.user.role === "faculty") window.location.replace("/faculty-home");
          return;
        }
      } catch (err) {
        console.error("Session check failed", err);
      }
      document.body.style.display = "block";
    }

    checkSession();
  </script>
</body>

</html>